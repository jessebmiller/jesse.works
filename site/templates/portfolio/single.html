{% extends "base.html" %}

{% block content %}
    <!-- Project Header -->
    <header class="project-header" style="background-color: var(--{{ page.taxonomies.project_types[0] }}-color)">
        <div class="content-container">
            <div class="project-header-content">
                <div class="project-meta">
                    <span class="project-category">
                        {{ page.taxonomies.project_types[0] | capitalize }}
                        {% if page.taxonomies.project_types[0] == "b2b" %}
                            Solution
                        {% elif page.taxonomies.project_types[0] == "consumer" %}
                            Product
                        {% else %}
                            Tool
                        {% endif %}
                    </span>
                    <h1 class="project-title">{{ page.title }}</h1>
                    <p class="project-headline">{{ page.description }}</p>
                    
                    <div class="project-details">
                        <div class="project-timeframe">
                            <span class="detail-label">Timeframe:</span>
                            <span class="detail-value">{{ page.extra.year }}</span>
                        </div>
                        <div class="project-role">
                            <span class="detail-label">Role:</span>
                            <span class="detail-value">{{ page.extra.role }}</span>
                        </div>
                        {% if page.extra.client %}
                            <div class="project-client">
                                <span class="detail-label">Client:</span>
                                <span class="detail-value">{{ page.extra.client }}</span>
                            </div>
                        {% endif %}
                    </div>
                </div>
                
                <div class="project-visual">
                    <!-- Abstract project representation -->
                    <div class="project-grid">
                        {% for i in range(end=48) %}
                            <div class="grid-cell"></div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Project Content -->
    <article class="project-content">
        <div class="content-container">
            <!-- Technologies Used -->
            <div class="tech-tags">
                {% for tag in page.taxonomies.tags %}
                    <span class="tech-tag">{{ tag }}</span>
                {% endfor %}
            </div>
            
            <!-- Main content -->
            <div class="project-article">
                {{ page.content | safe }}
            </div>
            
            {% if page.extra.outcome %}
                <div class="project-outcome">
                    <h2 class="outcome-title">Outcome</h2>
                    <p class="outcome-text">{{ page.extra.outcome }}</p>
                </div>
            {% endif %}
        </div>
    </article>
    
    <!-- Next/Previous Navigation -->
    <nav class="project-navigation">
        <div class="content-container">
            <div class="nav-grid">
                {% if page.earlier %}
                    <a href="{{ page.earlier.permalink }}" class="nav-previous">
                        <span class="nav-label">← Previous</span>
                        <span class="nav-title">{{ page.earlier.title }}</span>
                    </a>
                {% else %}
                    <div></div>
                {% endif %}
                
                <a href="{{ get_url(path='@/portfolio/_index.md') }}" class="nav-all">
                    All Projects
                </a>
                
                {% if page.later %}
                    <a href="{{ page.later.permalink }}" class="nav-next">
                        <span class="nav-label">Next →</span>
                        <span class="nav-title">{{ page.later.title }}</span>
                    </a>
                {% else %}
                    <div></div>
                {% endif %}
            </div>
        </div>
    </nav>
    
    <!-- Related Projects -->
    <section class="related-projects">
        <div class="content-container">
            <h2 class="section-heading">Related Projects</h2>
            
            <div class="related-grid">
                {% set portfolio = get_section(path="portfolio/_index.md") %}
                {% set related_type = page.taxonomies.project_types[0] %}
                {% set related = portfolio.pages 
                    | filter(attribute="taxonomies.project_types", value=related_type) 
                    | filter(attribute="relative_path", value_not=page.relative_path) 
                    | slice(end=3) %}
                
                {% for project in related %}
                    {% include "portfolio/partials/project_card.html" %}
                {% endfor %}
            </div>
        </div>
    </section>
    
    <!-- Call to Action -->
    {% include "partials/cta.html" %}
{% endblock content %}
